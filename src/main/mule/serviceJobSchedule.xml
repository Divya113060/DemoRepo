<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:wsc="http://www.mulesoft.org/schema/mule/wsc" xmlns:json-logger="http://www.mulesoft.org/schema/mule/json-logger"
	xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/json-logger http://www.mulesoft.org/schema/mule/json-logger/current/mule-json-logger.xsd
http://www.mulesoft.org/schema/mule/wsc http://www.mulesoft.org/schema/mule/wsc/current/mule-wsc.xsd">
	<sub-flow name="serviceJobScheduleSub_Flow" doc:id="b4335e12-5ac6-4afc-b515-cdb3d0d74f91" >
		<choice doc:name="Choice" doc:id="5346d59a-8ca1-4a28-a23a-e3d2fdfefea0" >
			<when expression='#[vars.requestBody.serviceJobScheduleRequest.scheduleRequest.serviceContractPlanNumber contains "\$"]'>
				<ee:transform doc:name="serviceJobSchedule Request Mapping and Set Operation Name" doc:id="a8ecb4d7-dc60-4ce4-9d71-7232e08ed43a">
					<ee:message>
						<ee:set-payload><![CDATA[%dw 2.0
import substring from dw::core::Strings

output application/xml
ns ns0 http://servicebench.com/serviceOrder/service/types
ns ser http://www.homeserve.com/ServiceBench/

fun contractOptionPosition(value)=substring(value,0,indexOf(value,"\$")) as String
---
{
	ns0#serviceJobScheduleRequest: {
		ns0#version: payload.body.ser#serviceJobScheduleRequest.ser#version,
		ns0#v4CrmVersion: payload.body.ser#serviceJobScheduleRequest.ser#v4CrmVersion,
		ns0#sourceSystemName: payload.body.ser#serviceJobScheduleRequest.ser#sourceSystemName,
		ns0#sourceSystemVersion: payload.body.ser#serviceJobScheduleRequest.ser#sourceSystemVersion,
		ns0#scheduleRequest: {
			ns0#requestControlID: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#requestControlID,
			(if(isEmpty(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#oldServiceJobID)){
			ns0#serviceOrderID: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceOrderID		
			}else{
				ns0#serviceOrderID: splitBy(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#oldServiceJobID,"-")[0]
			}),
			ns0#serviceOrderType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceOrderType,
			ns0#customerNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#customerNumber,
			ns0#customerBillingAcct: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#customerBillingAcct,
			ns0#companyName: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#companyName,
			ns0#title: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#title,
			ns0#lastName: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#lastName,
			ns0#firstName: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#firstName,
			ns0#address1: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#address1,
			ns0#address2: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#address2,
			ns0#address3: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#address3,
			ns0#city: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#city,
			ns0#stateProvince: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#stateProvince,
			ns0#postalCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#postalCode,
			
			(if(upper(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#country) == "CANADA" or upper(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#country) == "CAN"){
				ns0#country: "CA"
			}else if(upper(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#country) == "USA") {
				ns0#country: "US"
			}else{
				ns0#country: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#country
			}),
			ns0#homePhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#homePhone,
			ns0#workPhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#workPhone,
			ns0#alternatePhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#alternatePhone,
			ns0#mobilePhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#mobilePhone,
			ns0#emailAddress: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#emailAddress,
			ns0#alternateEmailAddress: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#alternateEmailAddress,
			ns0#accountAddress1: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountAddress1,
			ns0#accountAddress2: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountAddress2,
			ns0#accountCity: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountCity,
			ns0#accountStateProvince: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountStateProvince,
			ns0#accountPostalCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountPostalCode,
			ns0#accountCountry: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountCountry,
			ns0#accountPhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountPhone,
			ns0#accountWorkPhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountWorkPhone,
			ns0#accountAlternatePhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountAlternatePhone,
			ns0#accountMobilePhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountMobilePhone,
			ns0#serviceAdministrator: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceAdministrator,
			ns0#serviceDescription: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceDescription,
			ns0#directionsCrossStreets: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#directionsCrossStreets,
			ns0#specialInstructions: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#specialInstructions,
			ns0#paymentType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#paymentType,
			ns0#thirdPartyID: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#thirdPartyID,
			ns0#employeeID: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#employeeID,
			ns0#paymentTerms: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#paymentTerms,
			ns0#serviceCallFee: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceCallFee,
			ns0#serviceProviderAccount: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceProviderAccount,
			ns0#programMatched: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#programMatched,
			
			(if(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceProviderAccount == p('contractorCode')){
			ns0#programID: p('programID')
			}else{
				ns0#programID: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#programID
			}),
			ns0#availableDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#availableDate,
			ns0#availableType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#availableType,
			ns0#slotStartTime: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slotStartTime,
			ns0#slotLength: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slotLength,
			ns0#surveyCustomer: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#surveyCustomer,
			ns0#smsOptIn: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#smsOptIn,
			ns0#customerLanguagePreference: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#customerLanguagePreference,
			ns0#geoCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#geoCode,
			ns0#countyCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#countyCode,
			ns0#veraZipState: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#veraZipState,
			ns0#commercialFlag: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#commercialFlag,
			ns0#complaintCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#complaintCode,
			ns0#data1: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#data1,
			ns0#data2: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#data2,
			ns0#serviceRequestType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceRequestType,
			ns0#crmNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#crmNumber,
			ns0#originalCrmNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#originalCrmNumber,
			ns0#serviceType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceType,
			ns0#originalSaReferenceNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#originalSaReferenceNumber,
			ns0#serviceJobType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobType,
			ns0#purchasedFrom: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#purchasedFrom,
			ns0#requestedCompletionDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#requestedCompletionDate,
			ns0#requestedCompletionTime: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#requestedCompletionTime,
			ns0#forceBooked: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#forceBooked,
			ns0#serviceProviderUser: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceProviderUser,
			ns0#saAuthorizingUser: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#saAuthorizingUser,
			ns0#contractPurchaseDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#contractPurchaseDate,
			ns0#mailingLabelMethod: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#mailingLabelMethod,
			ns0#preferredContactMethod: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#preferredContactMethod,
			ns0#primaryPhoneNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#primaryPhoneNumber,
			ns0#productSize: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#productSize,
			ns0#storeNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#storeNumber,
			ns0#productPickupLocation: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#productPickupLocation,
			ns0#posStoreNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posStoreNumber,
			ns0#posTransactionNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posTransactionNumber,
			ns0#posTerminalNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posTerminalNumber,
			ns0#posRetailerRefNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posRetailerRefNumber,
			ns0#posPersonSelling: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posPersonSelling,
			ns0#posSaleDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posSaleDate,
			ns0#posSaleTime: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posSaleTime,
			ns0#authorizationAmount: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#authorizationAmount,
			ns0#skippedAvailability: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#skippedAvailability,
			ns0#ofrNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#ofrNumber,
			ns0#serviceCategory: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceCategory,
			ns0#serviceSubCategory: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceSubCategory,
			ns0#failureDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#failureDate,
			ns0#planType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#planType,
			ns0#labelFormatRequest: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#labelFormatRequest,
			ns0#addressValidation: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#addressValidation,
			ns0#addressValidationOverride: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#addressValidationOverride,
			ns0#addressValidationFormat: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#addressValidationFormat,
			ns0#proofOfPurchase: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#proofOfPurchase,
			ns0#diagnosticProgram: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#diagnosticProgram,
			ns0#activationCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#activationCode,
			ns0#models: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#models.*ser#model map ( model , indexOfModel ) -> {
					ns0#model: {
						ns0#productRowNumber: model.ser#productRowNumber,
						ns0#productStatus: model.ser#productStatus,
						ns0#productSubStatus: model.ser#productSubStatus,
						ns0#productCode: model.ser#productCode,
						ns0#oem: model.ser#oem,
						ns0#productLine: model.ser#productLine,
						ns0#merchandiseCode: model.ser#merchandiseCode,
						ns0#modelID: model.ser#modelID,
						ns0#brand: model.ser#brand,
						ns0#serialNumber: model.ser#serialNumber,
						ns0#serialNumberElectronic: model.ser#serialNumberElectronic,
						ns0#purchaseDate: model.ser#purchaseDate,
						ns0#purchasedFrom: model.ser#purchasedFrom,
						ns0#contractPurchaseDate: model.ser#contractPurchaseDate,
						ns0#contractNumber: model.ser#contractNumber,
						ns0#serviceContractExpiryDate: model.ser#serviceContractExpiryDate,
						ns0#purchasePrice: model.ser#purchasePrice,
						ns0#authorizationNumber: model.ser#authorizationNumber,
						ns0#authorizationAmount: model.ser#authorizationAmount,
						ns0#pexSerialNumber: model.ser#pexSerialNumber,
						ns0#pexModelId: model.ser#pexModelId,
						ns0#pexBrand: model.ser#pexBrand,
						ns0#pexPuchasePrice: model.ser#pexPuchasePrice,
						ns0#pexUnitReceivedDate: model.ser#pexUnitReceivedDate,
						ns0#pexExpectedDeliveryDate: model.ser#pexExpectedDeliveryDate,
						ns0#pexDeliveredDate: model.ser#pexDeliveredDate,
						ns0#failureDate: model.ser#failureDate,
						ns0#productLineAmount: model.ser#productLineAmount,
						ns0#productSize: model.ser#productSize,
						ns0#shippingCompany: model.ser#shippingCompany,
						ns0#shippingMethod: model.ser#shippingMethod,
						ns0#modelVersion: model.ser#modelVersion,
						ns0#warrantyInfo: model.ser#warrantyInfo,
						ns0#laborWarrantyExpiryDate: model.ser#laborWarrantyExpiryDate,
						ns0#partsWarrantyExpiryDate: model.ser#partsWarrantyExpiryDate,
						ns0#unitLocation: model.ser#unitLocation
					}
				})
			},
			ns0#parts: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#parts.*ser#part map ( part , indexOfPart ) -> {
					ns0#part: {
						ns0#productRowNumber: part.ser#productRowNumber,
						ns0#lineNumber: part.ser#lineNumber,
						ns0#partNumber: part.ser#partNumber,
						ns0#partDescription: part.ser#partDescription,
						ns0#quantity: part.ser#quantity,
						ns0#partStatus: part.ser#partStatus,
						ns0#partStatusDate: part.ser#partStatusDate,
						ns0#partOrderedNumber: part.ser#partOrderedNumber,
						ns0#invoiceNumber: part.ser#invoiceNumber,
						ns0#shippingCompany: part.ser#shippingCompany,
						ns0#trackingNumber: part.ser#trackingNumber,
						ns0#partOrderDate: part.ser#partOrderDate,
						ns0#partReceivedDate: part.ser#partReceivedDate,
						ns0#partOrderETA: part.ser#partOrderETA,
						ns0#serialNumber: part.ser#serialNumber,
						ns0#electronicSerialNumber: part.ser#electronicSerialNumber,
						ns0#saSourced: part.ser#saSourced
					}
				})
			},
			ns0#contractNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#contractNumber,
			ns0#serviceContractExpiryDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceContractExpiryDate,
			ns0#serviceContractObligor: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceContractObligor,
			ns0#serviceContractObligorType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceContractObligorType,
			ns0#serviceContractUnderwriter: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceContractUnderwriter,
			ns0#transactionTypes: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#transactionTypes.*ser#transactionType map ( transactionType , indexOfTransactionType ) -> {
					ns0#transactionType: {
						ns0#transactionTypeCode: transactionType.ser#transactionTypeCode,
						ns0#transactionDescription: transactionType.ser#transactionDescription
					}
				})
			},
			ns0#services: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#services.*ser#service map ( service , indexOfService ) -> {
					ns0#service: {
						ns0#serviceRowNumber: service.ser#serviceRowNumber,
						ns0#serviceID: service.ser#serviceID,
						ns0#serviceTransactionNumber: service.ser#serviceTransactionNumber,
						ns0#quantity: service.ser#quantity,
						ns0#serviceStatus: service.ser#serviceStatus,
						ns0#serviceStatusDate: service.ser#serviceStatusDate,
						ns0#serviceNumber: service.ser#serviceNumber,
						ns0#servicePurchaseDate: service.ser#servicePurchaseDate,
						ns0#serviceProduct: service.ser#serviceProduct
					}
				})
			},
			ns0#preQualification: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#preQualification.*ser#question map ( question , indexOfQuestion ) -> {
					ns0#question: {
						ns0#questionText: question.ser#questionText,
						ns0#answerText: question.ser#answerText
					}
				})
			},
			ns0#conditionAmounts: {
				ns0#amountType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#conditionAmounts.ser#amountType,
				ns0#amount: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#conditionAmounts.ser#amount,
				ns0#condition: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#conditionAmounts.ser#condition
			},
			ns0#warehouseService: {
				ns0#warehouseServicesType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#warehouseServicesType,
				ns0#clientAccountNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#clientAccountNumber,
				ns0#plantCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#plantCode,
				ns0#itemNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#itemNumber,
				ns0#modelNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#modelNumber,
				ns0#serialNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#serialNumber,
				ns0#quantity: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#quantity,
				ns0#routeOut: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#routeOut,
				ns0#depotLocationCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#depotLocationCode,
				ns0#depotProcessingTask: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#depotProcessingTask,
				ns0#productDepotHandling: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#productDepotHandling
			},
			ns0#serviceJobPayment: {
				ns0#paymentType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#paymentType,
				ns0#billingAddress: {
					ns0#addressLine1: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#billingAddress.ser#addressLine1,
					ns0#addressLine2: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#billingAddress.ser#addressLine2,
					ns0#city: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#billingAddress.ser#city,
					ns0#state: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#billingAddress.ser#state,
					ns0#postalCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#billingAddress.ser#postalCode,
					ns0#country: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#billingAddress.ser#country
				},
				ns0#cardInfo: {
					ns0#cardType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#cardType,
					ns0#cardHolderFirstName: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#cardHolderFirstName,
					ns0#cardHolderMiddleName: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#cardHolderMiddleName,
					ns0#cardHolderLastName: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#cardHolderLastName,
					ns0#cardNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#cardNumber,
					ns0#expirationDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#expirationDate,
					ns0#securityCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#securityCode,
					ns0#authorizedAmount: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#authorizedAmount
				}
			},
			ns0#productComponents: {
				ns0#actionRequired: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#productComponents.ser#actionRequired,
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#productComponents.*ser#component map ( component , indexOfComponent ) -> {
					ns0#component: {
						ns0#rowNumber: component.ser#rowNumber,
						ns0#componentNumber: component.ser#componentNumber,
						ns0#serialNumber: component.ser#serialNumber,
						ns0#quantities: {
							(component.ser#quantities.*ser#quantityInfo map ( quantityInfo , indexOfQuantityInfo ) -> {
								ns0#quantityInfo: {
									ns0#quantityType: quantityInfo.ser#quantityType,
									ns0#quantity: quantityInfo.ser#quantity
								}
							})
						}
					}
				})
			},
			ns0#supportingInformation: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#supportingInformation.*ser#supportInformation map ( supportInformation , indexOfSupportInformation ) -> {
					ns0#supportInformation: {
						ns0#supportData: supportInformation.ser#supportData,
						ns0#supportDataDescription: supportInformation.ser#supportDataDescription
					}
				})
			},
			ns0#thirdPartyBillAcct: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#thirdPartyBillAcct,
			ns0#premiumFlag: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#premiumFlag,
			ns0#customerPrePaidAmount: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#customerPrePaidAmount,
			ns0#authorizationNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#authorizationNumber,
			ns0#poNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#poNumber,
			
			(ns0#serviceContractPlanNumber:  contractOptionPosition(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceContractPlanNumber) ++ "createdBy") if(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceContractPlanNumber != null),
			
			ns0#custometInitiationDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#custometInitiationDate,
			ns0#symptomCodes: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#symptomCodes.*ser#symptomCode map ( symptomCode , indexOfSymptomCode ) -> {
					ns0#symptomCode: {
						ns0#symptomCodeData: symptomCode.ser#symptomCodeData,
						ns0#symptomCodeDescription: symptomCode.ser#symptomCodeDescription
					}
				})
			},
			ns0#severity: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#severity,
			ns0#appointmentReference: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#appointmentReference,
			ns0#administrationFee: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#administrationFee,
			ns0#administrationFeeTax: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#administrationFeeTax,
			ns0#estimatedRepairAmount: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#estimatedRepairAmount,
			ns0#totalEstimatedTax: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#totalEstimatedTax,
			ns0#slaTracked: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slaTracked,
			ns0#slaDays: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slaDays,
			ns0#slaHours: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slaHours,
			ns0#slaMinutes: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slaMinutes,
			ns0#relatedJob: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#relatedJob,
			ns0#orderBeforeOriginal: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#orderBeforeOriginal
		}
	}
}]]></ee:set-payload>
					</ee:message>
					<ee:variables>
						<ee:set-variable variableName="operation"><![CDATA["serviceJobSchedule"]]></ee:set-variable>
					</ee:variables>
				</ee:transform>
			</when>
			<otherwise>
				<ee:transform doc:name="serviceJobSchedule Request Mapping and Set Operation Name" doc:id="88c976db-a96f-4747-9bd4-a73e162203f3">
			<ee:message>
				<ee:set-payload><![CDATA[%dw 2.0
output application/xml
ns ns0 http://servicebench.com/serviceOrder/service/types
ns ser http://www.homeserve.com/ServiceBench/

---
{
	ns0#serviceJobScheduleRequest: {
		ns0#version: p('version'),
		ns0#v4CrmVersion: payload.body.ser#serviceJobScheduleRequest.ser#v4CrmVersion,
		ns0#sourceSystemName: payload.body.ser#serviceJobScheduleRequest.ser#sourceSystemName,
		ns0#sourceSystemVersion: payload.body.ser#serviceJobScheduleRequest.ser#sourceSystemVersion,
		ns0#scheduleRequest: {
			ns0#requestControlID: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#requestControlID,
			(if ( isEmpty(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#oldServiceJobID) ) {
				ns0#serviceOrderID: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceOrderID
			}else{
				ns0#serviceOrderID: splitBy(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#oldServiceJobID,"-")[0]
			}),
			ns0#serviceOrderType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceOrderType,
			ns0#customerNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#customerNumber replace "HS-" with "",
			ns0#customerBillingAcct: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#customerBillingAcct,
			ns0#companyName: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#companyName,
			ns0#title: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#title,
			ns0#lastName: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#lastName,
			ns0#firstName: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#firstName,
			ns0#address1: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#address1,
			ns0#address2: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#address2,
			ns0#address3: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#address3,
			ns0#city: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#city,
			ns0#stateProvince: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#stateProvince,
			ns0#postalCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#postalCode,
			(if ( upper(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#country) == "CANADA" or upper(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#country) == "CAN" ) {
				ns0#country: "CA"
			}else if ( upper(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#country) == "USA" ) {
				ns0#country: "US"
			}else{
				ns0#country: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#country
			}),
			ns0#homePhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#homePhone,
			ns0#workPhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#workPhone,
			ns0#alternatePhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#alternatePhone,
			ns0#mobilePhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#mobilePhone,
			ns0#emailAddress: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#emailAddress,
			ns0#alternateEmailAddress: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#alternateEmailAddress,
			ns0#accountAddress1: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountAddress1,
			ns0#accountAddress2: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountAddress2,
			ns0#accountCity: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountCity,
			ns0#accountStateProvince: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountStateProvince,
			ns0#accountPostalCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountPostalCode,
			ns0#accountCountry: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountCountry,
			ns0#accountPhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountPhone,
			ns0#accountWorkPhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountWorkPhone,
			ns0#accountAlternatePhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountAlternatePhone,
			ns0#accountMobilePhone: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#accountMobilePhone,
			ns0#serviceAdministrator: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceAdministrator,
			ns0#serviceDescription: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceDescription,
			ns0#directionsCrossStreets: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#directionsCrossStreets,
			ns0#specialInstructions: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#specialInstructions,
			ns0#paymentType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#paymentType,
			ns0#thirdPartyID: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#thirdPartyID,
			ns0#employeeID: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#employeeID,
			ns0#paymentTerms: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#paymentTerms,
			ns0#serviceCallFee: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceCallFee,
			ns0#serviceProviderAccount: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceProviderAccount,
			ns0#programMatched: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#programMatched,
			(if ( payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceProviderAccount == p('contractorCode') ) {
				ns0#programID: p('programID')
			}else{
				ns0#programID: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#programID
			}),
			ns0#availableDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#availableDate,
			(if ( payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slotLength == "1" ) {
				ns0#availableType: "2"
			}else{
				ns0#availableType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#availableType
			}),
			(if ( payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slotLength != null and payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slotLength > 1 ) {
				ns0#slotStartTime: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slotStartTime,
				ns0#slotLength: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slotLength,
			}else{
				// do not map slotStartTime and slotLength
			}),
			ns0#surveyCustomer: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#surveyCustomer,
			ns0#smsOptIn: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#smsOptIn,
			ns0#customerLanguagePreference: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#customerLanguagePreference,
			ns0#geoCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#geoCode,
			ns0#countyCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#countyCode,
			ns0#veraZipState: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#veraZipState,
			ns0#commercialFlag: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#commercialFlag,
			ns0#complaintCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#complaintCode,
			ns0#data1: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#data1,
			ns0#data2: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#data2,
			ns0#serviceRequestType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceRequestType,
			ns0#crmNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#crmNumber,
			ns0#originalCrmNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#originalCrmNumber,
			ns0#serviceType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceType,
			ns0#originalSaReferenceNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#originalSaReferenceNumber,
			ns0#serviceJobType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobType,
			ns0#purchasedFrom: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#purchasedFrom,
			ns0#requestedCompletionDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#requestedCompletionDate,
			ns0#requestedCompletionTime: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#requestedCompletionTime,
			ns0#forceBooked: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#forceBooked,
			ns0#serviceProviderUser: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceProviderUser,
			ns0#saAuthorizingUser: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#saAuthorizingUser,
			ns0#contractPurchaseDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#contractPurchaseDate,
			ns0#mailingLabelMethod: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#mailingLabelMethod,
			ns0#preferredContactMethod: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#preferredContactMethod,
			ns0#primaryPhoneNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#primaryPhoneNumber,
			ns0#productSize: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#productSize,
			ns0#storeNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#storeNumber,
			ns0#productPickupLocation: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#productPickupLocation,
			ns0#posStoreNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posStoreNumber,
			ns0#posTransactionNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posTransactionNumber,
			ns0#posTerminalNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posTerminalNumber,
			ns0#posRetailerRefNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posRetailerRefNumber,
			ns0#posPersonSelling: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posPersonSelling,
			ns0#posSaleDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posSaleDate,
			ns0#posSaleTime: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#posSaleTime,
			ns0#authorizationAmount: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#authorizationAmount,
			ns0#skippedAvailability: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#skippedAvailability,
			ns0#ofrNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#ofrNumber,
			ns0#serviceCategory: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceCategory,
			ns0#serviceSubCategory: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceSubCategory,
			ns0#failureDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#failureDate,
			ns0#planType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#planType,
			ns0#labelFormatRequest: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#labelFormatRequest,
			ns0#addressValidation: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#addressValidation,
			ns0#addressValidationOverride: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#addressValidationOverride,
			ns0#addressValidationFormat: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#addressValidationFormat,
			ns0#proofOfPurchase: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#proofOfPurchase,
			ns0#diagnosticProgram: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#diagnosticProgram,
			ns0#activationCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#activationCode,
			ns0#models: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#models.*ser#model map ( model , indexOfModel ) -> {
					ns0#model: {
						ns0#productRowNumber: model.ser#productRowNumber,
						ns0#productStatus: model.ser#productStatus,
						ns0#productSubStatus: model.ser#productSubStatus,
						ns0#productCode: model.ser#productCode,
						ns0#oem: model.ser#oem,
						ns0#productLine: model.ser#productLine,
						ns0#merchandiseCode: model.ser#merchandiseCode,
						ns0#modelID: model.ser#modelID,
						ns0#brand: model.ser#brand,
						ns0#serialNumber: model.ser#serialNumber,
						ns0#serialNumberElectronic: model.ser#serialNumberElectronic,
						ns0#purchaseDate: model.ser#purchaseDate,
						ns0#purchasedFrom: model.ser#purchasedFrom,
						ns0#contractPurchaseDate: model.ser#contractPurchaseDate,
						ns0#contractNumber: model.ser#contractNumber,
						ns0#serviceContractExpiryDate: model.ser#serviceContractExpiryDate,
						ns0#purchasePrice: model.ser#purchasePrice,
						ns0#authorizationNumber: model.ser#authorizationNumber,
						ns0#authorizationAmount: model.ser#authorizationAmount,
						ns0#pexSerialNumber: model.ser#pexSerialNumber,
						ns0#pexModelId: model.ser#pexModelId,
						ns0#pexBrand: model.ser#pexBrand,
						ns0#pexPuchasePrice: model.ser#pexPuchasePrice,
						ns0#pexUnitReceivedDate: model.ser#pexUnitReceivedDate,
						ns0#pexExpectedDeliveryDate: model.ser#pexExpectedDeliveryDate,
						ns0#pexDeliveredDate: model.ser#pexDeliveredDate,
						ns0#failureDate: model.ser#failureDate,
						ns0#productLineAmount: model.ser#productLineAmount,
						ns0#productSize: model.ser#productSize,
						ns0#shippingCompany: model.ser#shippingCompany,
						ns0#shippingMethod: model.ser#shippingMethod,
						ns0#modelVersion: model.ser#modelVersion,
						ns0#warrantyInfo: model.ser#warrantyInfo,
						ns0#laborWarrantyExpiryDate: model.ser#laborWarrantyExpiryDate,
						ns0#partsWarrantyExpiryDate: model.ser#partsWarrantyExpiryDate,
						ns0#unitLocation: model.ser#unitLocation
					}
				})
			},
			ns0#parts: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#parts.*ser#part map ( part , indexOfPart ) -> {
					ns0#part: {
						ns0#productRowNumber: part.ser#productRowNumber,
						ns0#lineNumber: part.ser#lineNumber,
						ns0#partNumber: part.ser#partNumber,
						ns0#partDescription: part.ser#partDescription,
						ns0#quantity: part.ser#quantity,
						ns0#partStatus: part.ser#partStatus,
						ns0#partStatusDate: part.ser#partStatusDate,
						ns0#partOrderedNumber: part.ser#partOrderedNumber,
						ns0#invoiceNumber: part.ser#invoiceNumber,
						ns0#shippingCompany: part.ser#shippingCompany,
						ns0#trackingNumber: part.ser#trackingNumber,
						ns0#partOrderDate: part.ser#partOrderDate,
						ns0#partReceivedDate: part.ser#partReceivedDate,
						ns0#partOrderETA: part.ser#partOrderETA,
						ns0#serialNumber: part.ser#serialNumber,
						ns0#electronicSerialNumber: part.ser#electronicSerialNumber,
						ns0#saSourced: part.ser#saSourced
					}
				})
			},
			ns0#contractNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#contractNumber,
			ns0#serviceContractExpiryDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceContractExpiryDate,
			ns0#serviceContractObligor: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceContractObligor,
			ns0#serviceContractObligorType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceContractObligorType,
			ns0#serviceContractUnderwriter: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceContractUnderwriter,
			ns0#transactionTypes: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#transactionTypes.*ser#transactionType map ( transactionType , indexOfTransactionType ) -> {
					ns0#transactionType: {
						ns0#transactionTypeCode: transactionType.ser#transactionTypeCode,
						ns0#transactionDescription: transactionType.ser#transactionDescription
					}
				})
			},
			ns0#services: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#services.*ser#service map ( service , indexOfService ) -> {
					ns0#service: {
						ns0#serviceRowNumber: service.ser#serviceRowNumber,
						ns0#serviceID: service.ser#serviceID,
						ns0#serviceTransactionNumber: service.ser#serviceTransactionNumber,
						ns0#quantity: service.ser#quantity,
						ns0#serviceStatus: service.ser#serviceStatus,
						ns0#serviceStatusDate: service.ser#serviceStatusDate,
						ns0#serviceNumber: service.ser#serviceNumber,
						ns0#servicePurchaseDate: service.ser#servicePurchaseDate,
						ns0#serviceProduct: service.ser#serviceProduct
					}
				})
			},
			ns0#preQualification: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#preQualification.*ser#question map ( question , indexOfQuestion ) -> {
					ns0#question: {
						ns0#questionText: question.ser#questionText,
						ns0#answerText: question.ser#answerText
					}
				})
			},
			ns0#conditionAmounts: {
				ns0#amountType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#conditionAmounts.ser#amountType,
				ns0#amount: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#conditionAmounts.ser#amount,
				ns0#condition: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#conditionAmounts.ser#condition
			},
			
				ns0#warehouseService:{
				ns0#warehouseServicesType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#warehouseServicesType,
				ns0#clientAccountNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#clientAccountNumber,
				ns0#plantCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#plantCode,
				ns0#itemNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#itemNumber,
				ns0#modelNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#modelNumber,
				ns0#serialNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#serialNumber,
				ns0#quantity: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#quantity,
				ns0#routeOut: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#routeOut,
				ns0#depotLocationCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#depotLocationCode,
				ns0#depotProcessingTask: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#depotProcessingTask,
				ns0#productDepotHandling: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#productDepotHandling,
				ns0#purchaseOrder: {
					ns0#purchaseOrderNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#purchaseOrder.ser#purchaseOrderNumber,
					ns0#internalDeliveryNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#purchaseOrder.ser#internalDeliveryNumber,
					ns0#clientReferenceNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#purchaseOrder.ser#clientReferenceNumber,
					ns0#dateOrderCreated: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#purchaseOrder.ser#dateOrderCreated,
					ns0#clientShipmentTerms: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#purchaseOrder.ser#clientShipmentTerms,
					ns0#requestedShipDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#purchaseOrder.ser#requestedShipDate,
					ns0#internalShippingCarrierCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#purchaseOrder.ser#internalShippingCarrierCode,
					ns0#internalShippingCarrierName: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#purchaseOrder.ser#internalShippingCarrierName,
					ns0#purchaseOrderSpecialInstructions: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#purchaseOrder.ser#purchaseOrderSpecialInstructions
				},
				ns0#productReturnAuthorization: {
					ns0#rmaNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#productReturnAuthorization.ser#rmaNumber,
					ns0#rmaType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#productReturnAuthorization.ser#rmaType,
					ns0#rmaPostedDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#productReturnAuthorization.ser#rmaPostedDate,
					ns0#returnReasonCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#warehouseService.ser#productReturnAuthorization.ser#returnReasonCode
				}
			},
			ns0#serviceJobPayment: {
				ns0#paymentType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#paymentType,
				ns0#billingAddress: {
					ns0#addressLine1: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#billingAddress.ser#addressLine1,
					ns0#addressLine2: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#billingAddress.ser#addressLine2,
					ns0#city: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#billingAddress.ser#city,
					ns0#state: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#billingAddress.ser#state,
					ns0#postalCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#billingAddress.ser#postalCode,
					ns0#country: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#billingAddress.ser#country
				},
				ns0#cardInfo: {
					ns0#cardType: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#cardType,
					ns0#cardHolderFirstName: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#cardHolderFirstName,
					ns0#cardHolderMiddleName: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#cardHolderMiddleName,
					ns0#cardHolderLastName: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#cardHolderLastName,
					ns0#cardNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#cardNumber,
					ns0#expirationDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#expirationDate,
					ns0#securityCode: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#securityCode,
					ns0#authorizedAmount: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceJobPayment.ser#cardInfo.ser#authorizedAmount
				}
			},
			ns0#productComponents: {
				ns0#actionRequired: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#productComponents.ser#actionRequired,
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#productComponents.*ser#component map ( component , indexOfComponent ) -> {
					ns0#component: {
						ns0#rowNumber: component.ser#rowNumber,
						ns0#componentNumber: component.ser#componentNumber,
						ns0#serialNumber: component.ser#serialNumber,
						ns0#quantities: {
							(component.ser#quantities.*ser#quantityInfo map ( quantityInfo , indexOfQuantityInfo ) -> {
								ns0#quantityInfo: {
									ns0#quantityType: quantityInfo.ser#quantityType,
									ns0#quantity: quantityInfo.ser#quantity
								}
							})
						}
					}
				})
			},
			ns0#supportingInformation: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#supportingInformation.*ser#supportInformation map ( supportInformation , indexOfSupportInformation ) -> {
					ns0#supportInformation: {
						ns0#supportData: supportInformation.ser#supportData,
						ns0#supportDataDescription: supportInformation.ser#supportDataDescription
					}
				})
			},
			ns0#thirdPartyBillAcct: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#thirdPartyBillAcct,
			ns0#premiumFlag: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#premiumFlag,
			ns0#customerPrePaidAmount: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#customerPrePaidAmount,
			ns0#authorizationNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#authorizationNumber,
			ns0#poNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#poNumber,
			ns0#serviceContractPlanNumber: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#serviceContractPlanNumber,
			ns0#custometInitiationDate: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#custometInitiationDate,
			ns0#symptomCodes: {
				(payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#symptomCodes.*ser#symptomCode map ( symptomCode , indexOfSymptomCode ) -> {
					ns0#symptomCode: {
						ns0#symptomCodeData: symptomCode.ser#symptomCodeData,
						ns0#symptomCodeDescription: symptomCode.ser#symptomCodeDescription
					}
				})
			},
			ns0#severity: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#severity,
			ns0#appointmentReference: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#appointmentReference,
			ns0#administrationFee: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#administrationFee,
			ns0#administrationFeeTax: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#administrationFeeTax,
			ns0#estimatedRepairAmount: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#estimatedRepairAmount,
			ns0#totalEstimatedTax: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#totalEstimatedTax,
			ns0#slaTracked: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slaTracked,
			ns0#slaDays: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slaDays,
			ns0#slaHours: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slaHours,
			ns0#slaMinutes: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#slaMinutes,
			ns0#relatedJob: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#relatedJob,
			ns0#orderBeforeOriginal: payload.body.ser#serviceJobScheduleRequest.ser#scheduleRequest.ser#orderBeforeOriginal
		} 
	}
	}]]></ee:set-payload>
			</ee:message>
			<ee:variables>
				<ee:set-variable variableName="operation"><![CDATA["serviceJobSchedule"]]></ee:set-variable>
			</ee:variables>
		</ee:transform>
			</otherwise>
		</choice>
		<flow-ref doc:name="serviceBenchAPICall_SubFlow" doc:id="f2408256-def8-4adb-81a4-0b3beaa80804" name="ServiceBenchAPICallSub_Flow"/>
		<ee:transform doc:name="serviceJobSchedule Response Mapping" doc:id="548a331f-a231-4104-ad34-50f125164d19" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/java
ns ser http://www.homeserve.com/ServiceBench/
ns ns0 http://servicebench.com/serviceOrder/service/types
---
{
	body: {
			ser#serviceJobScheduleResponse: {
			ser#version: payload.body.ns0#serviceJobScheduleResponse.ns0#version,
			ser#v4CrmVersion: payload.body.ns0#serviceJobScheduleResponse.ns0#v4CrmVersion,
			ser#sourceSystemName: payload.body.ns0#serviceJobScheduleResponse.ns0#sourceSystemName,
			ser#sourceSystemVersion: payload.body.ns0#serviceJobScheduleResponse.ns0#sourceSystemVersion,
			ser#msgStatus: payload.body.ns0#serviceJobScheduleResponse.ns0#msgStatus,
			
			(if(payload.body.ns0#serviceJobScheduleResponse.ns0#msgStatus == "NORMAL"){
			ser#scheduleResponse: {
				ser#requestControlID: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#requestControlID,
				ser#serviceOrderID: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#serviceOrderID,
				ser#serviceJobID: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#serviceJobID,
				ser#serviceJobHashValue: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#serviceJobHashValue,
				ser#serviceProviderAccount: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#serviceProviderAccount,
				ser#serviceProviderName: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#serviceProviderName,
				ser#serviceProviderAddress1: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#serviceProviderAddress1,
				ser#serviceProviderAddress2: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#serviceProviderAddress2,
				ser#serviceProviderCity: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#serviceProviderCity,
				ser#serviceProviderStateProvince: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#serviceProviderStateProvince,
				ser#serviceProviderPostalCode: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#serviceProviderPostalCode,
				ser#serviceProviderPhone: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#serviceProviderPhone,
				ser#customerNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#customerNumber,
				ser#companyName: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#companyName,
				ser#customerFirstName: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#customerFirstName,
				ser#customerLastName: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#customerLastName,
				ser#customerAddress1: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#customerAddress1,
				ser#customerAddress2: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#customerAddress2,
				ser#customerCity: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#customerCity,
				ser#customerStateProvince: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#customerStateProvince,
				ser#customerPostalCode: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#customerPostalCode,
				ser#customerCountry: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#customerCountry,
				ser#customerHomePhone: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#customerHomePhone,
				ser#customerWorkPhone: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#customerWorkPhone,
				ser#paymentType: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#paymentType,
				ser#veraZipReply: {
					ser#transactionID: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#transactionID,
					ser#veraZipCompletionCode: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#veraZipCompletionCode,
					ser#customerNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#customerNumber,
					ser#nameFirst: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#nameFirst,
					ser#nameMiddle: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#nameMiddle,
					ser#name: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#name,
					ser#phoneNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#phoneNumber,
					ser#addressLine1: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#addressLine1,
					ser#addressLine2: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#addressLine2,
					ser#aptNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#aptNumber,
					ser#addressCity: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#addressCity,
					ser#addressState: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#addressState,
					ser#addressZip: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#addressZip,
					ser#zipExt: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#zipExt,
					ser#veraZipReturnedRows: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#veraZipReturnedRows,
					ser#veraZipLists: {
						ser#veraZipState: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#veraZipLists.ns0#veraZipState,
						ser#veraZipStateTx: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#veraZipLists.ns0#veraZipStateTx,
						ser#veraZipZip1: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#veraZipLists.ns0#veraZipZip1,
						ser#veraZipZip2: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#veraZipLists.ns0#veraZipZip2,
						ser#veraZipGeoCode: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#veraZipLists.ns0#veraZipGeoCode,
						ser#veraZipZipExt1: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#veraZipLists.ns0#veraZipZipExt1,
						ser#veraZipZipExt2: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#veraZipLists.ns0#veraZipZipExt2,
						ser#veraZipCity: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#veraZipLists.ns0#veraZipCity,
						ser#veraZipCountyCode: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#veraZipLists.ns0#veraZipCountyCode,
						ser#veraZipCounty: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#veraZipLists.ns0#veraZipCounty,
						ser#veraZipInOutLimit: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#veraZipReply.ns0#veraZipLists.ns0#veraZipInOutLimit
					}
				},
				ser#warehouseService: {
					ser#warehouseServicesType: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#warehouseServicesType,
					ser#clientAccountNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#clientAccountNumber,
					ser#plantCode: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#plantCode,
					ser#itemNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#itemNumber,
					ser#modelNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#modelNumber,
					ser#serialNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#serialNumber,
					ser#quantity: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#quantity,
					ser#routeOut: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#routeOut,
					ser#depotLocationCode: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#depotLocationCode,
					ser#depotProcessingTask: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#depotProcessingTask,
					ser#productDepotHandling: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#productDepotHandling,
					ser#purchaseOrder: {
						ser#purchaseOrderNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#purchaseOrder.ns0#purchaseOrderNumber,
						ser#internalDeliveryNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#purchaseOrder.ns0#internalDeliveryNumber,
						ser#clientReferenceNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#purchaseOrder.ns0#clientReferenceNumber,
						ser#dateOrderCreated: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#purchaseOrder.ns0#dateOrderCreated,
						ser#clientShipmentTerms: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#purchaseOrder.ns0#clientShipmentTerms,
						ser#requestedShipDate: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#purchaseOrder.ns0#requestedShipDate,
						ser#internalShippingCarrierCode: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#purchaseOrder.ns0#internalShippingCarrierCode,
						ser#internalShippingCarrierName: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#purchaseOrder.ns0#internalShippingCarrierName,
						ser#purchaseOrderSpecialInstructions: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#purchaseOrder.ns0#purchaseOrderSpecialInstructions
					},
					ser#productReturnAuthorization: {
						ser#rmaNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#productReturnAuthorization.ns0#rmaNumber,
						ser#rmaType: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#productReturnAuthorization.ns0#rmaType,
						ser#rmaPostedDate: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#productReturnAuthorization.ns0#rmaPostedDate,
						ser#returnReasonCode: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#warehouseService.ns0#productReturnAuthorization.ns0#returnReasonCode
					}
				},
				ser#paymentDetail: {
					ser#paymentIdentifier: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#paymentDetail.ns0#paymentIdentifier,
					ser#transactionStatus: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#paymentDetail.ns0#transactionStatus,
					ser#transactionDetails: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#paymentDetail.ns0#transactionDetails,
					ser#authorizedAmount: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#paymentDetail.ns0#authorizedAmount
				},
				ser#addressTypeFlag: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#addressTypeFlag,
				ser#mailLabelStatus: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#mailLabelStatus,
				ser#mailLabelTrackingNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#mailLabelTrackingNumber,
				ser#mailLabelCarrierName: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#mailLabelCarrierName,
				ser#mailLabelImage: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#mailLabelImage,
				ser#mailLabelType: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#mailLabelType,
				ser#mailLabelErrors: {
					ser#mailLabelErrorCode: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#mailLabelErrors.ns0#mailLabelErrorCode,
					ser#mailLabelErrorDescription: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#mailLabelErrors.ns0#mailLabelErrorDescription,
					(payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#mailLabelErrors.*ns0#mailLabelError map ( mailLabelError , indexOfMailLabelError ) -> {
						ser#mailLabelError: {
							ser#mailLabelErrorCode: mailLabelError.ns0#mailLabelErrorCode,
							ser#mailLabelErrorDescription: mailLabelError.ns0#mailLabelErrorDescription
						}
					})
				},
				ser#authorizationNumber: payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#authorizationNumber,
				ser#mailIns: {
					(payload.body.ns0#serviceJobScheduleResponse.ns0#scheduleResponse.ns0#mailIns.*ns0#mailIn map ( mailIn , indexOfMailIn ) -> {
						ser#mailIn: {
							ser#shippedItem: mailIn.ns0#shippedItem,
							ser#status: mailIn.ns0#status,
							ser#shipper: mailIn.ns0#shipper,
							ser#trackingNumber: mailIn.ns0#trackingNumber,
							ser#note: mailIn.ns0#note,
							ser#mailingLabelURL: mailIn.ns0#mailingLabelURL
						}
					})
				}
			}
			}else{
			
			ser#statusDetails: {
				(payload.body.ns0#serviceJobScheduleResponse.ns0#statusDetails.*ns0#statusDetail map ( statusDetail , indexOfStatusDetail ) -> {
					ser#statusDetail: {
						ser#errorNo: statusDetail.ns0#errorNo,
						ser#errorText: statusDetail.ns0#errorText,
						ser#errorField: statusDetail.ns0#errorField
					}
				})
			}
			})
		}		
	}write "application/xml",
	headers: {
		header: {
			correlationId: correlationId
		}write "application/xml"
	}
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
	</sub-flow>
</mule>
